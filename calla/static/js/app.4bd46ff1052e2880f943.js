webpackJsonp([1],{"+skl":function(t,e){},BuXL:function(t,e){},EtH0:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),s={name:"App",data:function(){return{active_name:"Home"}},methods:{sidemenu_select:function(t){console.log(t),this.active_name=t,this.$router.push({name:t})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",[n("Header",[n("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[n("div",{staticClass:"layout-logo"}),t._v(" "),n("div",{staticClass:"layout-nav"},[n("MenuItem",{attrs:{name:"1"}},[n("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n                        Item 1\n                    ")],1),t._v(" "),n("MenuItem",{attrs:{name:"2"}},[n("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n                        Item 2\n                    ")],1),t._v(" "),n("MenuItem",{attrs:{name:"3"}},[n("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                        Item 3\n                    ")],1),t._v(" "),n("MenuItem",{attrs:{name:"4"}},[n("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                        Item 4\n                    ")],1)],1)])],1),t._v(" "),n("Layout",[n("Sider",{style:{background:"#fff"},attrs:{"hide-trigger":"",collapsible:"",breakpoint:"md","collapsed-width":78}},[n("Menu",{attrs:{"active-name":t.active_name,theme:"light",width:"auto","open-names":["articles"]},on:{"on-select":t.sidemenu_select}},[n("Submenu",{attrs:{name:"dashboard"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-bookmarks"}}),t._v("\n                          Dashboard\n                        ")],1),t._v(" "),n("MenuItem",{attrs:{name:"Home"}},[t._v("Home")])],2),t._v(" "),n("Submenu",{attrs:{name:"article"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-bookmarks"}}),t._v("\n                            文章\n                        ")],1),t._v(" "),n("MenuItem",{attrs:{name:"ArticleAll"}},[t._v("所有文章")]),t._v(" "),n("MenuItem",{attrs:{name:"articles_write"}},[t._v("写文章")]),t._v(" "),n("MenuItem",{attrs:{name:"1-2"}},[t._v("分类目录")]),t._v(" "),n("MenuItem",{attrs:{name:"1-3"}},[t._v("标签")])],2),t._v(" "),n("Submenu",{attrs:{name:"options"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n                            设置\n                        ")],1),t._v(" "),n("MenuItem",{attrs:{name:"options_general"}},[t._v("常规")]),t._v(" "),n("MenuItem",{attrs:{name:"options_published"}},[t._v("发布设置")])],2),t._v(" "),n("Submenu",{attrs:{name:"3"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                            Item 3\n                        ")],1),t._v(" "),n("MenuItem",{attrs:{name:"3-1"}},[t._v("Option 1")]),t._v(" "),n("MenuItem",{attrs:{name:"3-2"}},[t._v("Option 2")])],2)],1)],1),t._v(" "),n("Layout",{style:{padding:"0 24px 24px"}},[n("Breadcrumb",{style:{margin:"24px 0"}},[n("BreadcrumbItem",{attrs:{to:"/"}},[t._v("Home")]),t._v(" "),n("BreadcrumbItem",{attrs:{to:"/articles"}},[t._v("Articles")]),t._v(" "),n("BreadcrumbItem",[t._v("Layout")])],1),t._v(" "),n("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[n("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=n("VU/8")(s,a,!1,function(t){n("EtH0")},"data-v-48366a5a",null).exports,l=n("/ocq"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h1",[this._v(this._s(this.msg))]),this._v(" "),e("h2",[this._v("Essential Links")])])},staticRenderFns:[]};var c=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}},mounted:function(){this.msg="Fuck."}},r,!1,function(t){n("kgVl")},"data-v-57e047f5",null).exports,u=n("mtWM"),p=n.n(u),h={name:"ArticleIndex",data:function(){var t=this;return{columns:[{type:"selection",width:60,align:"center"},{key:"title",title:"标题"},{key:"author",title:"作者",align:"center"},{key:"category",title:"分类",align:"center"},{key:"tags",title:"标签",align:"cener"},{key:"status",title:"状态",align:"center"},{key:"action",title:"操作",fixed:"right",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(n)}}},"View"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(n)}}},"Delete")])}}],total:0,page_size:10,current:1,datas:[],all:null,loading:!0,select:[]}},mounted:function(){this.tableData()},methods:{click_select:function(t,e){if(console.log(t),console.log(e),0==this.select.length)this.select.push(t);else for(var n=0;n<this.select.length;n++){if(this.select[n].path==t.path){console.log("==");break}this.select.push(t);break}console.log(this.select)},show:function(t){console.log("Show"),this.$router.push({path:"/articles/edit",query:{path:t.row.path}})},remove:function(t){console.log("Remove"),console.log(t)},tableData:function(){var t=this,e=[];console.log("开始请求"),this.$ajax.get("http://127.0.0.1:5000/api/articles/").then(function(n){if(200==n.status){for(var o=0;o<n.data.results.length;o++){var s=n.data.results[o],a=s.meta;a.path=s.path;var i={status:"table-status-published"};a.hasOwnProperty("status")&&"draft"==a.status?i.status="table-status-draft":a.status="published",a.cellClassName=i,e.push(a)}t.total=n.data.total,t.datas=t.pagination(t.current,t.page_size,e),t.loading=!1}}).catch(function(t){console.log(t),e=[],this.total=0})},pagination:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments[2],o=(t-1)*e;return o+e>=n.length?n.slice(o,n.length):n.slice(o,o+e)},changePage:function(t){this.current=t,this.loading=!0,this.tableData()}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",staticStyle:{width:"100%"}},[n("Table",{ref:"selection",attrs:{border:"",loading:t.loading,size:"small",columns:t.columns,data:t.datas},on:{"on-row-click":t.click_select}}),t._v(" "),n("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.total,current:t.current,"page-size":t.page_size},on:{"on-change":t.changePage}})],1)])],1)},staticRenderFns:[]};var v=n("VU/8")(h,m,!1,function(t){n("fNgM")},null,null).exports,d={data:function(){return{msg:"Helo",article:{meta:"",text:""},value:"meta",loading:!1}},created:function(){this.make_input(),this.get_article()},methods:{update:function(){var t=this;console.log("update."),this.loading=!0;var e="http://127.0.0.1:5000/api/articles/"+this.$route.query.path;this.$ajax.put(e,{meta:this.article.meta,text:this.article.text}).then(function(e){console.log(e),t.loading=!1,t.$Notice.success({title:"更新成功！",desc:t.article.path+" 更新成功！"})})},make_input:function(){},get_article:function(){var t=this,e="http://127.0.0.1:5000/api/articles/"+this.$route.query.path;this.$ajax.get(e).then(function(e){var n=e.data;console.log(n.status),void 0===n.meta.status&&(n.meta.status="published"),console.log(n),t.article=n,console.log(t.article.meta.title)}).catch(function(t){console.log(t)})}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Collapse",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("Panel",{attrs:{name:"meta"}},[t._v("\n                Article meta\n                "),n("span",{attrs:{slot:"content"},slot:"content"},t._l(Object.keys(t.article.meta),function(e){return n("Row",{staticClass:"meta",attrs:{slot:"content"},slot:"content"},[n("Col",{attrs:{span:"5"}},[t._v(t._s(e)+":")]),t._v(" "),n("Col",{attrs:{span:"8"}},["status"==e?n("Select",{staticStyle:{width:"200px","margin-bottom":"40px"},model:{value:t.article.meta[e],callback:function(n){t.$set(t.article.meta,e,n)},expression:"article.meta[key]"}},[n("Option",{key:"published",attrs:{value:"published"}},[t._v("published")]),t._v(" "),n("Option",{key:"draft",attrs:{value:"draft"}},[t._v("draft")])],1):n("Input",{model:{value:t.article.meta[e],callback:function(n){t.$set(t.article.meta,e,n)},expression:"article.meta[key]"}})],1)],1)}))]),t._v(" "),n("Panel",{attrs:{name:"text"}},[t._v("\n            Text\n            "),n("Row",{staticClass:"text",attrs:{slot:"content"},slot:"content"},[n("Input",{attrs:{type:"textarea",autosize:!0},model:{value:t.article.text,callback:function(e){t.$set(t.article,"text",e)},expression:"article.text"}})],1)],1)],1),t._v(" "),n("Button",{attrs:{type:"primary",loading:t.loading,icon:"checkmark-round"},on:{click:t.update}},[t.loading?n("span",[t._v("updating...")]):n("span",[t._v("Save")])])],1)},staticRenderFns:[]};var _=n("VU/8")(d,g,!1,function(t){n("i77E")},null,null).exports,f={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var y=n("VU/8")({},f,!1,function(t){n("Skna")},null,null).exports,k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[this._v("\n    "+this._s(this.msg)+"\n    "),e("br"),this._v(" "),e("Button",{on:{click:this.publish}},[this._v("Publish")])],1)},staticRenderFns:[]};var b=n("VU/8")({data:function(){return{msg:"Hello, dashboard.home"}},methods:{publish:function(){}}},k,!1,function(t){n("h3bD")},null,null).exports,$={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var x=n("VU/8")({},$,!1,function(t){n("yafF")},null,null).exports,I={name:"SettingComponents",props:{type:"",title:{},key_:"",value:""},data:function(){return{msg:"Hello, components"}},methods:{change:function(t){this.key_;console.log("changess"),console.log(this.key_),console.log(t),this.$store.commit("update_options",{name:this.key_,value:t})}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Row",[n("Col",{attrs:{span:"4"}},[n("b",[t._v(t._s(t.title))])]),t._v(" "),n("Col",{attrs:{span:"8"}},["int"==t.type?n("InputNumber",{attrs:{value:t.value},on:{input:t.change}}):n("Input",{attrs:{value:t.value},on:{input:t.change}})],1)],1)],1)},staticRenderFns:[]};var w=n("VU/8")(I,C,!1,function(t){n("iEDt")},null,null).exports,M={name:"optionsGeneral",data:function(){return{msg:"Hello",st:this.$store.state.count,general_options:[{title:"站点名称",key:"sitename",placeholder:"标题"},{title:"站点url",key:"siteurl",placeholder:"站点 URL"},{title:"默认作者",key:"author",placeholder:"默认作者"},{title:"时区",key:"timezone",placeholder:"时区"},{title:"日期格式",key:"default_date_format",placeholder:"默认日期格式"}]}},computed:{count:function(){return this.$store.state.options_general.options},options:{get:function(){return this.$store.state.options_general.options},set:function(t){this.$store.commit("update_options",t),console.log("set"),console.log(t)}}},mounted:function(){console.log("State"),console.log(this.$store.commit);var t=this.get_keys();this.$store.dispatch("get_options",{keys:t})},components:{SettingComponents:w},methods:{get_keys:function(){for(var t=[],e=0;e<this.general_options.length;e++)t.push(this.general_options[e].key);return t},save:function(){var t=this;console.log("save"),console.log(this.options.author),this.$store.dispatch("save",{data:this.options}).then(function(e){console.log("Success!"),console.log(e),t.$Message.success("保存成功！")},function(e){console.error(e),t.$Message.error("保存错误！")})},reset:function(){var t=this;console.log("reset");var e=this.get_keys();this.$store.dispatch("get_options",{keys:e}).then(function(e){console.log("reset succesful!"),t.$Message.success("恢复成功！")},function(e){t.$Message.error("失败")})}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._l(t.general_options,function(e){return n("span",[n("SettingComponents",{attrs:{title:e.title,key_:e.key,type:e.type},model:{value:t.options[e.key],callback:function(n){t.$set(t.options,e.key,n)},expression:"options[item.key]"}}),t._v(" "),n("br")],1)}),t._v(" "),n("Row",[n("Col",{attrs:{span:"2"}},[n("Button",{on:{click:t.save}},[t._v("Save")])],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("Button",{on:{click:t.reset}},[t._v("Reset")])],1)],1)],2)},staticRenderFns:[]};var R=n("VU/8")(M,S,!1,function(t){n("BuXL")},null,null).exports,E={name:"OptionsComponent",props:["options"],computed:{count:function(){return this.$store.state.options_general.options},serv_options:{get:function(){return this.$store.state.options_general.options},set:function(t){this.$store.commit("update_options",t),console.log("set"),console.log(t)}}},mounted:function(){console.log("mounted"),console.log(this.options);var t=this.get_keys();this.$store.dispatch("get_options",{keys:t})},components:{SettingComponents:w},methods:{get_keys:function(){for(var t=[],e=0;e<this.options.length;e++)t.push(this.options[e].key);return t},save:function(){var t=this;console.log("save"),console.log(this.serv_options.author),this.$store.dispatch("save",{data:this.serv_options}).then(function(e){console.log("Success!"),console.log(e),t.$Message.success("保存成功！")},function(e){console.error(e),t.$Message.error("保存错误！")})},reset:function(){var t=this;console.log("reset");var e=this.get_keys();this.$store.dispatch("get_options",{keys:e}).then(function(e){console.log("reset succesful!"),t.$Message.success("恢复成功！")},function(e){t.$Message.error("失败")})}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._l(t.options,function(e){return n("span",[n("SettingComponents",{attrs:{title:e.title,key_:e.key,type:e.type},model:{value:t.serv_options[e.key],callback:function(n){t.$set(t.serv_options,e.key,n)},expression:"serv_options[item.key]"}}),t._v(" "),n("br")],1)}),t._v(" "),n("Row",[n("Col",{attrs:{span:"2"}},[n("Button",{on:{click:t.save}},[t._v("Save")])],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("Button",{on:{click:t.reset}},[t._v("Reset")])],1)],1)],2)},staticRenderFns:[]};var B={name:"optionsPublished",components:{Options:n("VU/8")(E,H,!1,function(t){n("oWoh")},null,null).exports},data:function(){return{options:[{title:"每页显示几条",key:"default_pagination",placeholder:"标题",type:"int"}]}}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("Options",{attrs:{options:this.options}})],1)},staticRenderFns:[]};var V=n("VU/8")(B,F,!1,function(t){n("p9GO")},null,null).exports;o.default.use(l.a);var O=new l.a({routes:[{path:"/dashboard",component:y,children:[{path:"home",name:"Home",component:b}]},{path:"options",component:x,children:[{path:"general",name:"options_general",component:R},{path:"published",name:"options_published",component:V}]},{path:"/",name:"HelloWorld",component:c},{path:"/articles/",name:"ArticleAll",component:v},{path:"/articles/edit",name:"ArticleEdit",component:_}]}),U=n("BTaQ"),A=n.n(U),z=(n("+skl"),n("NYxO")),D=n("mvHQ"),L=n.n(D),P=n("//Fk"),j=n.n(P);p.a.defaults.baseURL="http://127.0.0.1:5000",p.a.defaults.headers.post["Content-Type"]="application/json";var N={state:{options:{}},mutations:{set_options:function(t,e){t.options=e},update_options:function(t,e){t.options[e.name]=e.value}},actions:{get_options:function(t,e){var n=t.commit;return new j.a(function(t,o){var s="/api/settings/?key="+e.keys.toString();p.a.get(s).then(function(e){200==e.status&&(n("set_options",e.data),t(e))}).catch(function(t){o(t)})})},save:function(t,e){t.commit;return new j.a(function(t,n){console.log("Save.....");var o=L()(e.data);console.log(o);p.a.post("/api/settings/",o).then(function(e){t(e)},function(t){n(response)})})}}};o.default.use(z.a);var W=new z.a.Store({modules:{options_general:N}});o.default.use(A.a),o.default.prototype.$ajax=p.a,o.default.config.productionTip=!1,new o.default({el:"#app",router:O,components:{App:i},template:"<App/>",store:W})},Skna:function(t,e){},fNgM:function(t,e){},h3bD:function(t,e){},i77E:function(t,e){},iEDt:function(t,e){},kgVl:function(t,e){},oWoh:function(t,e){},p9GO:function(t,e){},yafF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4bd46ff1052e2880f943.js.map